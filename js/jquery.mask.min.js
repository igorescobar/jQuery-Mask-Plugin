// jQuery Mask Plugin v1.10.11
// github.com/igorescobar/jQuery-Mask-Plugin
(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):b(window.jQuery||window.Zepto)})(function(b){var y=function(a,e,d){a=b(a);var g=this,k=a.val(),p;e="function"===typeof e?e(a.val(),void 0,a,d):e;var c={invalid:[],getCaret:function(){try{var l,q=0,c=a.get(0),f=document.selection,b=c.selectionStart;if(f&&!~navigator.appVersion.indexOf("MSIE 10"))l=f.createRange(),l.moveStart("character",a.is("input")?-a.val().length:-a.text().length),q=l.text.length;else if(b||"0"===b)q=b;return q}catch(e){}},
setCaret:function(l){try{if(a.is(":focus")){var q,c=a.get(0);c.setSelectionRange?c.setSelectionRange(l,l):c.createTextRange&&(q=c.createTextRange(),q.collapse(!0),q.moveEnd("character",l),q.moveStart("character",l),q.select())}}catch(b){}},events:function(){a.on("keyup.mask",c.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){a.keydown().keyup()},100)}).on("change.mask",function(){a.data("changed",!0)}).on("blur.mask",function(){k===a.val()||a.data("changed")||a.trigger("change");
a.data("changed",!1)}).on("keydown.mask, blur.mask",function(){k=a.val()}).on("focusout.mask",function(){d.clearIfNotMatch&&!p.test(c.val())&&c.val("")})},getRegexMask:function(){for(var l=[],a,c,b,d,h=0;h<e.length;h++)(a=g.translation[e[h]])?(c=a.pattern.toString().replace(/.{1}$|^.{1}/g,""),b=a.optional,(a=a.recursive)?(l.push(e[h]),d={digit:e[h],pattern:c}):l.push(b||a?c+"?":c)):l.push(e[h].replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));l=l.join("");d&&(l=l.replace(RegExp("("+d.digit+"(.*"+d.digit+
")?)"),"($1)?").replace(RegExp(d.digit,"g"),d.pattern));return RegExp(l)},destroyEvents:function(){a.off("keydown keyup paste drop blur focusout ".split(" ").join(".mask "))},val:function(l){var c=a.is("input")?"val":"text";0<arguments.length?(a[c](l),c=a):c=a[c]();return c},getMCharsBeforeCount:function(c,a){for(var b=0,f=0,d=e.length;f<d&&f<c;f++)g.translation[e.charAt(f)]||(c=a?c+1:c,b++);return b},caretPos:function(a,b,d,f){return g.translation[e.charAt(Math.min(a-1,e.length-1))]?Math.min(a+d-
b-f,d):c.caretPos(a+1,b,d,f)},behaviour:function(a){a=a||window.event;c.invalid=[];var d=a.keyCode||a.which;if(-1===b.inArray(d,g.byPassKeys)){var e=c.getCaret(),f=c.val(),n=f.length,h=e<n,k=c.getMasked(),m=k.length,s=c.getMCharsBeforeCount(m-1)-c.getMCharsBeforeCount(n-1);k!==f&&c.val(k);!h||65===d&&a.ctrlKey||(8!==d&&46!==d&&(e=c.caretPos(e,n,m,s)),c.setCaret(e));return c.callbacks(a)}},getMasked:function(a){var b=[],k=c.val(),f=0,n=e.length,h=0,p=k.length,m=1,s="push",u=-1,t,w;d.reverse?(s="unshift",
m=-1,t=0,f=n-1,h=p-1,w=function(){return-1<f&&-1<h}):(t=n-1,w=function(){return f<n&&h<p});for(;w();){var x=e.charAt(f),v=k.charAt(h),r=g.translation[x];if(r)v.match(r.pattern)?(b[s](v),r.recursive&&(-1===u?u=f:f===t&&(f=u-m),t===u&&(f-=m)),f+=m):r.optional?(f+=m,h-=m):r.fallback?(b[s](r.fallback),f+=m,h-=m):c.invalid.push({p:h,v:v,e:r.pattern}),h+=m;else{if(!a)b[s](x);v===x&&(h+=m);f+=m}}a=e.charAt(t);n!==p+1||g.translation[a]||b.push(a);return b.join("")},callbacks:function(b){var g=c.val(),p=g!==
k,f=[g,b,a,d],n=function(a,c,b){"function"===typeof d[a]&&c&&d[a].apply(this,b)};n("onChange",!0===p,f);n("onKeyPress",!0===p,f);n("onComplete",g.length===e.length,f);n("onInvalid",0<c.invalid.length,[g,b,a,c.invalid,d])}};g.mask=e;g.options=d;g.remove=function(){var b=c.getCaret();c.destroyEvents();c.val(g.getCleanVal());c.setCaret(b-c.getMCharsBeforeCount(b));return a};g.getCleanVal=function(){return c.getMasked(!0)};g.init=function(e){e=e||!1;d=d||{};g.byPassKeys=b.jMaskGlobals.byPassKeys;g.translation=
b.jMaskGlobals.translation;g.translation=b.extend({},g.translation,d.translation);g=b.extend(!0,{},g,d);p=c.getRegexMask();!1===e?(d.placeholder&&a.attr("placeholder",d.placeholder),a.attr("autocomplete","off"),c.destroyEvents(),c.events(),c.val()!=c.getMasked()&&(e=c.getCaret(),c.val(c.getMasked()),c.setCaret(e+c.getMCharsBeforeCount(e,!0)))):(c.events(),c.val(c.getMasked()))};g.init(!a.is("input"))};b.maskWatchers={};var A=function(){var a=b(this),e={},d=a.attr("data-mask");a.attr("data-mask-reverse")&&
(e.reverse=!0);a.attr("data-mask-clearifnotmatch")&&(e.clearIfNotMatch=!0);if(z(a,d,e))return a.data("mask",new y(this,d,e))},z=function(a,e,d){d=d||{};a=b(a).data("mask");var g=JSON.stringify;try{return"object"!==typeof a||g(a.options)!==g(d)||a.mask!==e}catch(k){}};b.fn.mask=function(a,e){e=e||{};var d=this.selector,g=b.jMaskGlobals,k=b.jMaskGlobals.watchInterval,p=function(){if(z(this,a,e))return b(this).data("mask",new y(this,a,e))};b(this).each(p);d&&""!==d&&g.watchInputs&&(clearInterval(b.maskWatchers[d]),
b.maskWatchers[d]=setInterval(function(){b(document).find(d).each(p)},k))};b.fn.unmask=function(){clearInterval(b.maskWatchers[this.selector]);delete b.maskWatchers[this.selector];return this.each(function(){b(this).data("mask")&&b(this).data("mask").remove().removeData("mask")})};b.fn.cleanVal=function(){return this.data("mask").getCleanVal()};var k={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,watchDataMask:!1,byPassKeys:[9,16,17,18,36,
37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};b.jMaskGlobals=b.jMaskGlobals||{};k=b.jMaskGlobals=b.extend(!0,{},k,b.jMaskGlobals);k.dataMask&&b(k.dataMaskAttr).each(A);setInterval(function(){b.jMaskGlobals.watchDataMask&&b(document).find(b.jMaskGlobals.maskElements).filter(k.dataMaskAttr).each(A)},k.watchInterval)});
